<app-admin-panel-navbar></app-admin-panel-navbar>


<div class="generalContainer">


  <div class="col-lg-8 offset-lg-2">
    <h4 *ngIf="remainingSeat !== undefined">Réservation pour cet atelier - Il reste <strong [ngClass]="{'greenFont' : remainingSeat > 0, 'redFont' : remainingSeat <= 0}">{{remainingSeat}}</strong> place<span *ngIf="remainingSeat > 1">s</span></h4>
    <table id="table" class="table table-striped table-hover table-sm" style="margin-top: 5px" >
      <thead class="thead-light">
      <tr>
        <th scope="col">Nom</th>
        <th scope="col">Prénom</th>
        <th scope="col">Nombre de place</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let participate of participates">
        <td>{{participate.nameUser}}</td>
        <td>{{participate.fNameUser}}</td>
        <td>{{participate.nbSeat}}</td>
      </tr>
      </tbody>
    </table>
  </div>

  <div class="col-lg-8 offset-lg-2">
    <form *ngIf="workshop !== undefined" [formGroup]="formEdit">
      <div class="form-group">
        <label for="title" class="requiredAsterisk">Titre de l'atelier</label>
        <input formControlName="titleWorkshop" type="text" class="form-control" id="title" placeholder="Titre" [value]="workshop.titleWorkshop" (change)="setTitleWorkshop($event)">
      </div>

      <!--<div class="form-group">
        <label for="date" class="requiredAsterisk">Date de l'atelier</label>
        <input formControlName="dateWorkshop" type="date" class="form-control" id="date" [value]="workshop.dateWorkshop" (change)="setDateWorkshop($event)">
      </div>-->

      <div class="form-group">
        <label for="dateWorkshop" > Date et heure de l'atelier </label>
        <input formControlName="dateWorkshop" [owlDateTimeTrigger]="dt" [owlDateTime]="dt" id="dateWorkshop" class="form-control">
        <owl-date-time #dt></owl-date-time>
      </div>

      <!--<div class="form-group">
        <label for="time" class="requiredAsterisk">Date de l'atelier</label>
        <input formControlName="timeWorkshop" type="time" class="form-control" id="time" [value]="workshop.timeWorkshop" (change)="setTimeWorkshop($event)">
      </div>-->

      <div class="form-group">
        <label for="description">Description de l'atelier</label>
        <textarea formControlName="description" type="text" class="form-control" id="description" placeholder="Description" [value]="workshop.description" (change)="setDescription($event)"></textarea>
      </div>

      <div class="form-group">
        <label for="price">Prix de l'atelier</label>
        <input formControlName="price" type="number" step="0.01" class="form-control" id="price" placeholder="Prix" [value]="workshop.price" (change)="setPrice($event)">
      </div>

      <div class="form-group">
        <label for="nbSeat">Nombre de place</label>
        <input formControlName="nbSeat" type="number" class="form-control" id="nbSeat" placeholder="Nombre de place" [value]="workshop.nbSeat" (change)="setNbSeat($event)">
      </div>

      <div class="form-group">
        <label for="minAge">Age minimum</label>
        <input formControlName="minAge" type="number" class="form-control" id="minAge" placeholder="Age minimum" [value]="workshop.minAge" (change)="setMinAge($event)">
      </div>

      <div class="form-group">
        <label for="maxAge">Age maximum</label>
        <input formControlName="maxAge" type="number" class="form-control" id="maxAge" placeholder="Age maximum" [value]="workshop.maxAge" (change)="setMaxAge($event)">
      </div>

      <div class="form-group">
        <label for="nameAnimator">Animateur</label>
        <select id="nameAnimator" formControlName="nameAnimator" class="form-control" (change)="setNameAnimator($event)" >
          <option value="-1" >Choisissez l'animateur de l'atelier</option>
          <option type="number" [selected]="workshop.nameAnimator == 'Laura'" [value]="'Laura'">Laura</option>
          <option type="number" [selected]="workshop.nameAnimator == 'Loreline'" [value]="'Loreline'">Loreline</option>
        </select>
      </div>

      <div class="form-group">
        <button (click)="onSubmit()" type="submit" class="btn btn-primary" [disabled]="this.formEdit.get('titleWorkshop').invalid || this.formEdit.get('dateWorkshop').invalid ||
      this.formEdit.get('minAge').value > this.formEdit.get('maxAge').value || this.formEdit.get('nameAnimator').value === '-1'" routerLink="/admin/atelier" routerLinkActive="active" >Editer l'atelier</button>

        <div class="float-right"> <button (click)="onDelete()" class="btn btn-danger" routerLink="/admin/atelier" routerLinkActive="active" >Supprimer l'atelier</button></div>
      </div>
    </form>
  </div>
</div>
