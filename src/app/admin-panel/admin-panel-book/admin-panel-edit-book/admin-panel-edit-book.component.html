<app-admin-panel></app-admin-panel>

<div class="generalContainer col-lg-8 offset-lg-2">
  <h2 *ngIf="book !== undefined">Edition de "{{book.titleBook}}"</h2>
  <form [formGroup]="formEdit">
    <div class="form-group">
      <label for="title">Titre</label>
      <input *ngIf="book !== undefined" formControlName="titleBook" type="text" class="form-control" id="title" [value]="book.titleBook" (change)="setTitle($event)" placeholder="Titre du livre">
    </div>
    <div class="form-group">
      <label for="isbn">ISBN</label>
      <input *ngIf="book !== undefined" formControlName="ISBN" type="text" class="form-control" id="isbn" [value]="book.ISBN" (change)="setISBN($event)" placeholder="ISBN du livre">
    </div>
    <div class="form-group">
      <label for="summary">Résumé</label>
      <textarea *ngIf="book !== undefined" formControlName="summary" type="text" class="form-control" id="summary" [value]="book.summary" (change)="setSummary($event)" placeholder="Résumé"></textarea>
    </div>
    <div class="form-group">
      <label for="price">Prix</label>
      <input *ngIf="book !== undefined" formControlName="price" type="number" step="0.01" class="form-control" id="price" [value]="book.price" (change)="setPrice($event)" placeholder="Prix du livre">
    </div>
    <div class="form-group">
      <label for="stock">Nombre d'exemplaire en stock</label>
      <input *ngIf="book !== undefined" formControlName="nbStock" type="number" [value]="book.nbStock" (change)="setNbStock($event)" class="form-control" id="stock">
    </div>

    <div class="form-group">
      <label for="category">Categorie du livre</label>
      <select *ngIf="book !== undefined" id="category" formControlName="idCategory" class="form-control" (change)="setIdCategory($event)" >
        <option disabled >Choisissez la catégorie du livre</option>
        <option type="number" *ngFor="let category of categories" [value]="category.idCategory" [selected]="category.idCategory == book.idCategory">{{category.nameCategory}}</option>
      </select>
    </div>

    <div class="form-group">
      <label for="publisher">Editeur du livre</label>
      <select *ngIf="book !== undefined" id="publisher" formControlName="idPublisher" class="form-control" (change)="setIdPublisher($event)" >
        <option selected [value]="-1">Choisissez l'éditeur du livre</option>
        <option type="number" *ngFor="let publisher of publishers" [value]="publisher.idPublisher" [selected]="publisher.idPublisher == book.idPublisher">{{publisher.namePublisher}}</option>
      </select>
    </div>

    <div class="form-group">
      <div class="form-check">
        <input *ngIf="book !== undefined" formControlName="trends" class="form-check-input" type="checkbox" [value]="book.trends" (change)="setTrends($event)" id="trends">
        <label class="form-check-label" for="trends">
          Coup de coeur du libraire ? <img class="trendsImg" src="assets/img/heart.png"/>
        </label>
      </div>
    </div>

    <div class="form-group">
      <label for="personnalizedWord">Mot du libraire</label>
      <textarea *ngIf="book !== undefined" formControlName="personnalizedWord" type="text" [value]="book.personnalizedWord" class="form-control" (change)="setPersonnalizedWord($event)" id="personnalizedWord"></textarea>
    </div>

    <div class="form-group">
      <button (click)="onSubmit()" type="submit" class="btn btn-primary" routerLink="/admin" routerLinkActive="active" >Editer le livre</button>

      <div class="float-right"> <button (click)="onDelete()" class="btn btn-danger" routerLink="/admin" routerLinkActive="active" >Supprimer le livre</button></div>
    </div>
    <!--[disabled]="this.formEdit.get('titleBook').invalid || this.formEdit.get('ISBN').invalid || this.formEdit.get('summary').invalid
      || this.formEdit.get('price').invalid || this.formEdit.get('nbStock').invalid || this.formEdit.get('idCategory').invalid || this.formEdit.get('idPublisher').invalid ||
      this.formEdit.get('idPublisher').value === '-1' || this.formEdit.get('idCategory').value === '-1'"-->
  </form>
</div>
